This directory is the run directory template in the GEOS-Chem unit tester
for the RnPbBe7 simulation using High Performance GEOS-Chem (GCHP). 

After copying, execute bash script initialSetup.sh to create symbolic
links to source code and data referenced in configuration file ExtData.rc. 
ExtData.rc is set up to use 2x2.5 GEOS-FP meteorogoly fields. Changing 
resolutions requires manual update of that file.

Use files ending in '.bashrc' as a template for environment setup. Set up
your environment prior to compiling.

Compile to create 'geos' executable using the Makefile which invokes 
bash script build.sh
   1. First compile: 'make compile_clean'
   2. Subsequent compiles, any of the following:
        'make compile_standard' : skips recompiling MAPL, ESMF, and DyCore
        'make compile_debug'    : same as above but with debug compile flags on
        'make compile_mapl'     : also recompiles MAPL

Set common run settings in bash script runConfig.sh to avoid updating the same
settings in multiple files. If executed, settings in the following 
configuration files will be over-written and a summary of the new run settings
is output to file runSettings.log:
   1. CAP.rc           : simulation start/end/duration; heartbeat; debug level
   2. fvcore_layout.rc : grid res; transport dt
   3. GCHP.rc          : compute resources; grid res; all dt; transport on/off 
   4. HISTORY.rc       : output frequency, duration, and mode; cores per node
   5. input.geos*      : most settings
*NOTE: start time, end time, restart filename, and diagnostics are all 
ignored in input.geos when using GCHP.

Sample run scripts for submitting jobs to a SLURM or Grid Enginer scheduling
system are included as examples for running the geos executable. Note that
all sample run scripts include executing runConfig.sh prior to the simulation.

Output data are stored in the 'OutputDir' directory. The output restart 
filename is set in GIGC.rc next to GIGCchem_INTERNAL_CHECKPOINT_TYPE and 
must have '-' at the start. It is set up as '-gcchem_internal_checkpoint_c24.nc'. 

Do 'make cleanup_output' to clean the run directory prior to doing a new run.
To rerun without deleting your data, delete only file cap_restart. This is required
in order to avoid a segmentation fault if your configured run duration fits only 
once between your configured start and end datetimes.

For more information, see the GEOS-Chem High Performance wiki page at
http://wiki.seas.harvard.edu/geos-chem/index.php/GEOS-Chem_HP
or contact the GEOS-Chem Support Team.

14 July 2017
GEOS-Chem Support Team
geos-chem-support@as.harvard.edu